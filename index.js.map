{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47286025-dcd3f7c6d98bacb5edade47ee';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default async function createHttpRequest(options) {\n  try {\n    const response = await axios.get(BASE_URL, options);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightBox = new SimpleLightbox('.gallery li a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n\nexport default function addImagesToHtml(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const imagesHtml = images\n    .map(image => {\n      return `<li class=\"item-ul\">\n  <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" /></a>\n  <div class=\"about-img-div\">\n    <p class=\"description-img\">Likes</p>\n    <p class=\"description-img\">Views</p>\n    <p class=\"description-img\">Comments</p>\n    <p class=\"description-img\">Downloads</p>\n    <span class=\"description-value\">${image.likes}</span>\n    <span class=\"description-value\">${image.views}</span>\n    <span class=\"description-value\">${image.comments}</span>\n    <span class=\"description-value\">${image.downloads}</span>\n  </div>\n</li>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imagesHtml);\n\n  \n\n  lightBox.refresh();\n}","import createHttpRequest from './js/pixabay-api.js';\nimport addImagesToHtml from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nconst KEY = '47286025-dcd3f7c6d98bacb5edade47ee';\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet totalPagesToLoad = 0;\n\nform.addEventListener('submit', searchImagesFu);\nloadMoreButton.addEventListener('click', loadMoreImages);\n\n\nasync function searchImagesFu(event) {\n  event.preventDefault();\n\n  searchQuery = form.elements.input.value.trim();\n  currentPage = 1;\n  gallery.innerHTML = '';\n\n  if (searchQuery === '' || searchQuery.length < 2) {\n    iziToast.error({\n      position: \"topRight\",\n      backgroundColor: `#ef4040`,\n      messageColor: `#fafafb`,\n      titleColor: `#fafafb`,\n      iconColor: `#fafafb`,\n      title: '',\n      message: 'The input field is empty or has less than two characters!',\n    });\n    loadMoreButton.style.display = 'none';\n    return;\n  }\n\n  loader.classList.remove('hidden');\n  loader.style.display = 'block'; // add\n\n  const options = {\n    params: {\n      key: KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const data = await createHttpRequest(options);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        position: \"topRight\",\n        backgroundColor: `#ef4040`,\n        messageColor: `#fafafb`,\n        titleColor: `#fafafb`,\n        iconColor: `#fafafb`,\n        title: '',\n        message: 'No pictures found! Try again!',\n      });\n      loadMoreButton.style.display = 'none';\n    } else {\n      addImagesToHtml(data.hits);\n      loadMoreButton.classList.remove('hidden');\n      totalHits = data.totalHits;\n      totalPagesToLoad = Math.ceil(totalHits / 15);\n\n      if (totalPagesToLoad > 1) {\n        loadMoreButton.style.display = 'block';\n      } else {\n        loadMoreButton.style.display = 'none';\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: `Error fetching images: ${error.message || error}`,\n    });\n  } finally {\n    loader.classList.add('hidden');  \n    loader.style.display = 'none'; // add\n    form.reset();\n  }\n}\n\nasync function loadMoreImages() {\n  loader.classList.remove('hidden');\n  loader.style.display = 'block'; // add\n  currentPage += 1;\n\n  const options = {\n    params: {\n      key: KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const data = await createHttpRequest(options);\n\n    addImagesToHtml(data.hits);\n\n    const galleryItem = document.querySelector('.gallery li');\n    const galleryItemParams = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: galleryItemParams.height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      title: '',\n      message: `Error fetching images: ${error.message || error}`,\n    });\n  } finally {\n    loader.classList.add('hidden');\n    loader.style.display = 'none'; // add\n    if (currentPage >= totalPagesToLoad) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n}"],"names":["BASE_URL","createHttpRequest","options","axios","error","lightBox","SimpleLightbox","addImagesToHtml","images","gallery","imagesHtml","image","form","loader","loadMoreButton","KEY","currentPage","searchQuery","totalHits","totalPagesToLoad","searchImagesFu","loadMoreImages","event","iziToast","data","galleryItemParams"],"mappings":"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"}